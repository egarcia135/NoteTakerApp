{"ast":null,"code":"import _defineProperty from \"/Users/kamchungtam/Downloads/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/kamchungtam/Downloads/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/kamchungtam/Downloads/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/kamchungtam/Downloads/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/kamchungtam/Downloads/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/kamchungtam/Downloads/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/kamchungtam/Downloads/client/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/kamchungtam/Downloads/client/src/Pages/CreatePostPage.js\";\nimport React, { Component } from \"react\";\nimport { Redirect } from 'react-router';\nimport Form from 'react-bootstrap/Form';\nimport Col from 'react-bootstrap/Col';\nimport Container from 'react-bootstrap/Container';\nimport Button from 'react-bootstrap/Button';\nimport DatePicker from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport Navbar from \"../Components/Navbar.js\";\nimport Footer from \"../Components/Footer.js\";\n\nvar FormX =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(FormX, _Component);\n\n  function FormX(props) {\n    var _this;\n\n    _classCallCheck(this, FormX);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(FormX).call(this, props));\n\n    _this.change = function (e) {\n      _this.setState(_defineProperty({}, e.target.name, e.target.value));\n    };\n\n    _this.onSubmit = function (e) {\n      e.preventDefault();\n      console.log(_this.state);\n      var fd = new FormData();\n      fd.append('title', _this.state.title);\n      fd.append('courseID', _this.props.location.state.classId);\n      fd.append('note', _this.state.notes);\n      fd.append('userID', _this.props.location.state.userId + 1); //remove +1 after backend fix their api\n\n      fd.append('flagged', _this.state.flagged);\n      var searchParams = new URLSearchParams();\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = fd[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var pair = _step.value;\n          searchParams.append(pair[0], pair[1]);\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return != null) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      fetch(\"http://localhost:8080/seniorproject/addPost\", {\n        body: searchParams,\n        method: \"post\"\n      }).then(function (response) {\n        if (response.status === 200) {\n          alert(\"post created\");\n\n          _this.setState({\n            summited: true\n          });\n        } else {\n          alert(\"error\");\n        }\n      });\n    };\n\n    _this.fileSelectedHandler = function (e) {\n      _this.setState({\n        selectedFile: e.target.files[0]\n      });\n    };\n\n    console.log(_this.props.location.state.classId);\n    console.log(_this.props.location.state.userId);\n    _this.state = {\n      summited: false,\n      selectedFile: null,\n      title: '',\n      notes: '',\n      course: '',\n      flagged: false,\n      startDate: new Date()\n    };\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(FormX, [{\n    key: \"handleChange\",\n    value: function handleChange(date) {\n      this.setState({\n        startDate: date\n      });\n    }\n  }, {\n    key: \"render\",\n    // fileUploadHandler = () => {\n    //   const fd = new FormData();\n    //   fd.append('image', this.state.selectedFile, this.state.selectedFile.name);\n    //   axios.post(\"//API endpoint\", fd).then(res => {\n    //     console.log(res);\n    //   })\n    // }\n    value: function render() {\n      var _this2 = this;\n\n      var toClassPage = {\n        pathname: \"/classpage/\" + this.props.location.state.classId,\n        state: {\n          classTitle: this.props.location.state.classTitle,\n          classDescription: this.props.location.state.classDescription\n        }\n      };\n\n      if (this.state.summited) {\n        return React.createElement(Redirect, {\n          push: true,\n          to: toClassPage,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 97\n          },\n          __self: this\n        });\n      }\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, React.createElement(Navbar, {\n        isLoggedIn: this.props.isLoggedIn,\n        resetAllState: this.props.resetAllState,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }), React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, \"Post Note\"), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }), React.createElement(Container, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, React.createElement(Form, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, React.createElement(Form.Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, React.createElement(Form.Group, {\n        as: Col,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, React.createElement(Form.Control, {\n        name: \"title\",\n        type: \"title\",\n        placeholder: \"Enter title\",\n        value: this.state.title,\n        onChange: function onChange(e) {\n          return _this2.change(e);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      })), React.createElement(Form.Group, {\n        as: Col,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, React.createElement(DatePicker, {\n        selected: this.state.startDate,\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      })), React.createElement(Form.Group, {\n        as: Col,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, React.createElement(\"select\", {\n        className: \"custom-select\",\n        name: \"course\",\n        value: this.state.course,\n        onChange: function onChange(e) {\n          return _this2.change(e);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"Math234\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }, \"Math234\"), React.createElement(\"option\", {\n        value: \"Art\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, \"Art\"))))), React.createElement(Form, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, React.createElement(Form.Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, React.createElement(Form.Group, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, \"Enter notes\"), React.createElement(Form.Control, {\n        name: \"notes\",\n        as: \"textarea\",\n        rows: \"3\",\n        value: this.state.notes,\n        onChange: function onChange(e) {\n          return _this2.change(e);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      })), React.createElement(\"h3\", {\n        className: \"text-left\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, \"Upload media\"), React.createElement(\"div\", {\n        className: \"uploaded\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        name: \"selectedFile\",\n        type: \"file\",\n        onChange: function onChange(e) {\n          return _this2.change(e);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        onClick: this.selectedFile,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, \" Upload\"))), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      })), React.createElement(Button, {\n        onClick: function onClick(e) {\n          return _this2.onSubmit(e);\n        },\n        variant: \"primary\",\n        type: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, \"Submit\")), React.createElement(Footer, {\n        isLoggedIn: this.props.isLoggedIn,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return FormX;\n}(Component);\n\nexport default FormX;","map":{"version":3,"sources":["/Users/kamchungtam/Downloads/client/src/Pages/CreatePostPage.js"],"names":["React","Component","Redirect","Form","Col","Container","Button","DatePicker","Navbar","Footer","FormX","props","change","e","setState","target","name","value","onSubmit","preventDefault","console","log","state","fd","FormData","append","title","location","classId","notes","userId","flagged","searchParams","URLSearchParams","pair","fetch","body","method","then","response","status","alert","summited","fileSelectedHandler","selectedFile","files","course","startDate","Date","handleChange","bind","date","toClassPage","pathname","classTitle","classDescription","isLoggedIn","resetAllState"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Redirect } from 'react-router';\nimport Form from 'react-bootstrap/Form'\nimport Col from 'react-bootstrap/Col'\nimport Container from 'react-bootstrap/Container';\nimport Button from 'react-bootstrap/Button';\nimport DatePicker from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport Navbar from \"../Components/Navbar.js\";\nimport Footer from \"../Components/Footer.js\";\n\nclass FormX extends Component {\n  \n  constructor(props) {\n    super(props);\n\n    console.log(this.props.location.state.classId);\n    console.log(this.props.location.state.userId);\n\n    this.state = {\n      summited: false,\n      selectedFile: null,\n      title: '',\n      notes: '',\n      course: '',\n      flagged: false,\n      startDate: new Date()\n    };\n    this.handleChange = this.handleChange.bind(this);\n\n  }\n    change = (e) => {\n      this.setState({\n        [e.target.name]: e.target.value,\n      });\n    };\n\n    handleChange(date) {\n      this.setState({\n        startDate: date\n      });\n    }\n\n    onSubmit = (e) => {\n      e.preventDefault();\n      console.log(this.state);\n\n      const fd = new FormData();\n      fd.append('title', this.state.title);\n      fd.append('courseID', this.props.location.state.classId);\n      fd.append('note', this.state.notes);\n      fd.append('userID', this.props.location.state.userId+1); //remove +1 after backend fix their api\n      fd.append('flagged', this.state.flagged);\n\n      const searchParams = new URLSearchParams();\n      for (const pair of fd) {\n        searchParams.append(pair[0], pair[1]);\n      }\n\n      fetch(\"http://localhost:8080/seniorproject/addPost\", {\n        body: searchParams,\n        method: \"post\"\n      })\n      .then(response => {\n        if (response.status === 200) {\n          alert(\"post created\");\n          this.setState({ summited:true });\n        } else {\n          alert(\"error\");\n        }\n      })\n    }\n\n    fileSelectedHandler = (e) => {\n      this.setState({\n        selectedFile: e.target.files[0]\n     })\n    } \n\n    // fileUploadHandler = () => {\n    //   const fd = new FormData();\n    //   fd.append('image', this.state.selectedFile, this.state.selectedFile.name);\n    //   axios.post(\"//API endpoint\", fd).then(res => {\n    //     console.log(res);\n    //   })\n    // }\n\n  render() {\n    const toClassPage = {\n                          pathname: \"/classpage/\" + this.props.location.state.classId,\n                          state: {\n                            classTitle: this.props.location.state.classTitle,\n                            classDescription: this.props.location.state.classDescription \n                          }\n                        }\n    if(this.state.summited) {\n      return <Redirect push to={toClassPage} />;\n    } \n    return (\n      <div>\n        <Navbar isLoggedIn={this.props.isLoggedIn} resetAllState={this.props.resetAllState}/>\n        <h2>Post Note</h2>\n        <hr></hr>\n        <Container>\n           <Form>\n               <Form.Row>\n                    <Form.Group as={Col}>\n                      <Form.Control \n                        name=\"title\"\n                        type=\"title\"\n                        placeholder=\"Enter title\"\n                        value={this.state.title}\n                        onChange={e => this.change(e)}  \n                      />\n                    </Form.Group>\n                    <Form.Group as={Col}>\n                        <DatePicker\n                            selected={this.state.startDate}\n                            onChange={this.handleChange}\n                        />\n                    </Form.Group>\n                    <Form.Group as={Col}>\n                      <select className=\"custom-select\" name=\"course\" value={this.state.course} onChange={e => this.change(e)}>\n                          <option value=\"Math234\">Math234</option>\n                          <option value=\"Art\">Art</option>\n                      </select>\n                    </Form.Group>\n                </Form.Row>\n            </Form> \n            <Form>\n              <Form.Row>\n                <Form.Group>\n                  <Form.Label>Enter notes</Form.Label>\n                    <Form.Control \n                      name = \"notes\"\n                      as=\"textarea\" \n                      rows=\"3\"\n                      value={this.state.notes}\n                      onChange={e => this.change(e)}\n                    />\n                </Form.Group>\n                <h3 className=\"text-left\">Upload media</h3>\n                  <div className=\"uploaded\">\n                    <input name=\"selectedFile\" type=\"file\" onChange={e => this.change(e)} />\n                    <button onClick={this.selectedFile}> Upload</button>\n                  </div>\n              </Form.Row>\n              <hr></hr>\n            </Form>\n              <Button \n                onClick ={e => this.onSubmit(e)} \n                variant=\"primary\" \n                type=\"submit\">\n                Submit\n              </Button>\n        </Container>   \n        <Footer isLoggedIn={this.props.isLoggedIn}/>\n      </div>\n    );\n  }\n}\nexport default FormX;\n\n\n\n"]},"metadata":{},"sourceType":"module"}