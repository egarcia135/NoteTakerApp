{"ast":null,"code":"import _defineProperty from \"/Users/eduardo/Desktop/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/eduardo/Desktop/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/eduardo/Desktop/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/eduardo/Desktop/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/eduardo/Desktop/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/eduardo/Desktop/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/eduardo/Desktop/client/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/eduardo/Desktop/client/src/Pages/CreatePostPage.js\";\nimport React, { Component } from \"react\";\nimport { Redirect } from 'react-router';\nimport Form from 'react-bootstrap/Form';\nimport Col from 'react-bootstrap/Col';\nimport Container from 'react-bootstrap/Container';\nimport Button from 'react-bootstrap/Button';\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport Navbar from \"../Components/Navbar.js\";\nimport Footer from \"../Components/Footer.js\";\nimport { storage } from '../firebase';\n\nvar FormX =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(FormX, _Component);\n\n  function FormX(props) {\n    var _this;\n\n    _classCallCheck(this, FormX);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(FormX).call(this, props));\n\n    _this.change = function (e) {\n      _this.setState(_defineProperty({}, e.target.name, e.target.value));\n    };\n\n    _this.onSubmit = function (e) {\n      e.preventDefault();\n      console.log(_this.state);\n      var fd = new FormData();\n      fd.append('title', _this.state.title);\n      fd.append('courseID', _this.props.location.state.classId);\n      fd.append('note', _this.state.notes);\n      fd.append('userID', _this.props.location.state.userId + 1); //remove +1 after backend fix their api\n\n      fd.append('flagged', _this.state.flagged);\n      var searchParams = new URLSearchParams();\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = fd[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var pair = _step.value;\n          searchParams.append(pair[0], pair[1]);\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return != null) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      fetch(\"http://localhost:8080/seniorproject/addPost\", {\n        body: searchParams,\n        method: \"post\"\n      }).then(function (response) {\n        if (response.status === 200) {\n          alert(\"post created\");\n\n          _this.setState({\n            summited: true\n          });\n        } else {\n          alert(\"error\");\n        }\n      });\n    };\n\n    _this.handleChange = function (e) {\n      if (e.target.files[0]) {\n        var image = e.target.files[0];\n\n        _this.setState(function () {\n          return {\n            image: image\n          };\n        });\n      }\n    };\n\n    _this.handleUpload = function () {\n      var image = _this.state.image;\n      var uploadTask = storage.ref(\"images/\".concat(image.name)).put(image);\n      uploadTask.on('state_changed', function (snapshot) {\n        // progrss function ....\n        var progress = Math.round(snapshot.bytesTransferred / snapshot.totalBytes * 100);\n\n        _this.setState({\n          progress: progress\n        });\n      }, function (error) {\n        // error function ....\n        console.log(error);\n      }, function () {\n        // complete function ....\n        storage.ref('images').child(image.name).getDownloadURL().then(function (notes) {\n          console.log(notes);\n\n          _this.setState({\n            notes: notes\n          });\n        });\n      });\n    };\n\n    console.log(_this.props.location.state.classId);\n    console.log(_this.props.location.state.userId);\n    _this.state = {\n      summited: false,\n      title: '',\n      notes: '',\n      flagged: false,\n      image: null //url: ''\n\n    };\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleUpload = _this.handleUpload.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(FormX, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var toClassPage = {\n        pathname: \"/classpage/\" + this.props.location.state.classId,\n        state: {\n          classTitle: this.props.location.state.classTitle,\n          classDescription: this.props.location.state.classDescription\n        }\n      };\n\n      if (this.state.summited) {\n        return React.createElement(Redirect, {\n          push: true,\n          to: toClassPage,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 108\n          },\n          __self: this\n        });\n      }\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, React.createElement(Navbar, {\n        isLoggedIn: this.props.isLoggedIn,\n        resetAllState: this.props.resetAllState,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }), React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, \"Post Note\"), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }), React.createElement(Container, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, React.createElement(Form, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, React.createElement(Form.Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, React.createElement(Form.Group, {\n        as: Col,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, React.createElement(Form.Control, {\n        name: \"title\",\n        type: \"title\",\n        placeholder: \"Enter title\",\n        value: this.state.title,\n        onChange: function onChange(e) {\n          return _this2.change(e);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      })))), React.createElement(Form, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, React.createElement(Form.Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        className: \"text-left\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, \"Upload media\"), React.createElement(\"div\", {\n        className: \"uploaded\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"file\",\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        onClick: this.handleUpload,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, \"Upload\")), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      })), React.createElement(\"img\", {\n        src: this.state.notes || 'http://via.placeholder.com/400x300',\n        alt: \"Uploaded images\",\n        height: \"300\",\n        width: \"400\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      })), React.createElement(Button, {\n        onClick: function onClick(e) {\n          return _this2.onSubmit(e);\n        },\n        variant: \"primary\",\n        type: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, \"Submit\")), React.createElement(Footer, {\n        isLoggedIn: this.props.isLoggedIn,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return FormX;\n}(Component);\n\nexport default FormX;","map":{"version":3,"sources":["/Users/eduardo/Desktop/client/src/Pages/CreatePostPage.js"],"names":["React","Component","Redirect","Form","Col","Container","Button","Navbar","Footer","storage","FormX","props","change","e","setState","target","name","value","onSubmit","preventDefault","console","log","state","fd","FormData","append","title","location","classId","notes","userId","flagged","searchParams","URLSearchParams","pair","fetch","body","method","then","response","status","alert","summited","handleChange","files","image","handleUpload","uploadTask","ref","put","on","snapshot","progress","Math","round","bytesTransferred","totalBytes","error","child","getDownloadURL","bind","toClassPage","pathname","classTitle","classDescription","isLoggedIn","resetAllState"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Redirect } from 'react-router';\nimport Form from 'react-bootstrap/Form'\nimport Col from 'react-bootstrap/Col'\nimport Container from 'react-bootstrap/Container';\nimport Button from 'react-bootstrap/Button';\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport Navbar from \"../Components/Navbar.js\";\nimport Footer from \"../Components/Footer.js\";\nimport {storage} from '../firebase';\n\nclass FormX extends Component {\n  \n  constructor(props) {\n    super(props);\n\n    console.log(this.props.location.state.classId);\n    console.log(this.props.location.state.userId);\n\n    this.state = {\n      summited: false,\n      title: '',\n      notes: '',\n      flagged: false,\n      image: null,\n      //url: ''\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleUpload = this.handleUpload.bind(this);\n\n\n  }\n    change = (e) => {\n      this.setState({\n        [e.target.name]: e.target.value,\n      });\n    };\n\n\n    onSubmit = (e) => {\n      e.preventDefault();\n      console.log(this.state);\n\n      const fd = new FormData();\n      fd.append('title', this.state.title);\n      fd.append('courseID', this.props.location.state.classId);\n      fd.append('note', this.state.notes);\n      fd.append('userID', this.props.location.state.userId+1); //remove +1 after backend fix their api\n      fd.append('flagged', this.state.flagged);\n\n      const searchParams = new URLSearchParams();\n      for (const pair of fd) {\n        searchParams.append(pair[0], pair[1]);\n      }\n\n      fetch(\"http://localhost:8080/seniorproject/addPost\", {\n        body: searchParams,\n        method: \"post\"\n      })\n      .then(response => {\n        if (response.status === 200) {\n          alert(\"post created\");\n          this.setState({ summited:true });\n        } else {\n          alert(\"error\");\n        }\n      })\n    }\n\n    handleChange = e => {\n      if (e.target.files[0]) {\n          const image = e.target.files[0];\n          this.setState(() => ({image}));\n        }\n  }\n\n    handleUpload = () => {\n      const {image} = this.state;\n      const uploadTask = storage.ref(`images/${image.name}`).put(image);\n      uploadTask.on('state_changed', \n      (snapshot) => {\n        // progrss function ....\n        const progress = Math.round((snapshot.bytesTransferred / snapshot.totalBytes) * 100);\n        this.setState({progress});\n      }, \n      (error) => {\n           // error function ....\n        console.log(error);\n      }, \n    () => {\n        // complete function ....\n        storage.ref('images').child(image.name).getDownloadURL().then(notes => {\n            console.log(notes);\n            this.setState({notes});\n        })\n    });\n  }\n\n  render() {\n    const toClassPage = {\n                          pathname: \"/classpage/\" + this.props.location.state.classId,\n                          state: {\n                            classTitle: this.props.location.state.classTitle,\n                            classDescription: this.props.location.state.classDescription \n                          }\n                        }\n    if(this.state.summited) {\n      return <Redirect push to={toClassPage} />;\n    } \n    return (\n      <div>\n        <Navbar isLoggedIn={this.props.isLoggedIn} resetAllState={this.props.resetAllState}/>\n        <h2>Post Note</h2>\n        <hr></hr>\n        <Container>\n           <Form>\n               <Form.Row>\n                    <Form.Group as={Col}>\n                      <Form.Control \n                        name=\"title\"\n                        type=\"title\"\n                        placeholder=\"Enter title\"\n                        value={this.state.title}\n                        onChange={e => this.change(e)}  \n                      />\n                    </Form.Group>\n                </Form.Row>\n            </Form> \n            <Form>\n              <Form.Row>\n                <h3 className=\"text-left\">Upload media</h3>\n                  <div className=\"uploaded\">\n                  <input type=\"file\" onChange={this.handleChange}/>\n                  <button onClick={this.handleUpload}>Upload</button>\n                  </div>\n                  <br/>\n              </Form.Row>\n              <img src={this.state.notes || 'http://via.placeholder.com/400x300'} alt=\"Uploaded images\" height=\"300\" width=\"400\"/>\n              <hr></hr>\n            </Form>\n              <Button \n                onClick ={e => this.onSubmit(e)} \n                variant=\"primary\" \n                type=\"submit\">\n                Submit\n              </Button>\n        </Container>   \n        <Footer isLoggedIn={this.props.isLoggedIn}/>\n      </div>\n    );\n  }\n}\nexport default FormX;\n\n\n\n"]},"metadata":{},"sourceType":"module"}